<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        html {
            font-family: sans-serif;
        }

        body {
            width: 50%;
            max-width: 800px;
            min-width: 480px;
            margin: 0 auto;
        }

        .msgResultado {
            color: white;
            padding: 3px;
        }
    </style>
</head>
<body>
    <h1>Jogo do adivinha número</h1>
    <p>Pense num número entre 1 e 100.</p>
    <div class="form">
        <label for="cxnumero"> Insire o número que pensou: </label>
        <input type="text" id="cxnumero" class="cxnumero">
        <input type="submit" value="Verificar" class="btEnviar">
    </div>
    <!-- visualização dos msgResultados -->
    <div class="resultParas">
        <p class="listaNumeros"></p>
        <p class="msgResultado"></p>
        <p class="msgTentativa"></p>
    </div>


    <script>
        // Número aleatório entre 1 e 100
        var randomNumber = Math.floor(Math.random() * 100) + 1;
        
        // Variáveis auxiliares que guardam os valores de cada elemento HTML
        var listaNumeros = document.querySelector('.listaNumeros');
        var msgResultado = document.querySelector('.msgResultado');
        var msgTentativa = document.querySelector('.msgTentativa');
        var btEnviar = document.querySelector('.btEnviar');
        var cxnumero = document.querySelector('.cxnumero');

        var contador = 1;
        var resetButton;

        // Confere o estado do jogo
        function Conferir() {
            
            // Converte o número da caixa input para number (inteiro ou real)
            var numeroAdivinhar = Number(cxnumero.value);

            if (contador === 1) {
                /*
                    Ver se a propriedade textContent é compatível com o Internet Explorer 8
                    The textContent property sets or returns the textual content of the specified node, and all its descendants.
                    If you set the textContent property, any child nodes are removed and replaced by a single Text node containing the specified string.
                */
                listaNumeros.textContent = 'Números que tentou Adivinhar: ';
            }

            // Adiciona número à lista de tentativas
            listaNumeros.textContent += numeroAdivinhar + ' ';

            if (numeroAdivinhar === randomNumber) {
                /* Acertou no número */
                msgResultado.textContent = 'Parabéns! Acretou!';
                msgResultado.style.backgroundColor = 'green';
                msgTentativa.textContent = '';    // limpa a lista
                setGameOver();    // B           //
            } else if (contador === 10) {
                    // Teve 10 tentativas falhadas
                    msgResultado.textContent = '!!!O JOGO TERMINOU!!!';
                    msgTentativa.textContent = '';
                    setGameOver();
                } else {
                    // não acertou no número
                    msgResultado.textContent = 'Errado!';
                    msgResultado.style.backgroundColor = 'red';
                    if(numeroAdivinhar < randomNumber) {
                        msgTentativa.textContent='Valor inferior!' ;
                    } else if(numeroAdivinhar > randomNumber) {
                            msgTentativa.textContent = 'Valor superior!';
                        }
                }
            contador++;
            cxnumero.value = '';    // limpa a caixa de input para voltar a inserir valor
        }

        // Se clicou no botão então chama a função
        btEnviar.addEventListener('click', Conferir);

        // Prepara a interface para um novo jogo
        function setGameOver() {
            cxnumero.disabled = true;    // desativa o input
            btEnviar.disabled = true;    // desativa o botão
            resetButton = document.createElement('button');    // cria um novo botão
            resetButton.textContent = 'Iniciar Novo Jogo';
            document.body.appendChild(resetButton);    // acrescenta o botão
            resetButton.addEventListener('click', resetGame);
        }

        //
        function resetGame() {
            contador = 1;    // reinicia o contador
            // seleciona os parágrafos que estão dentro da div .resultParas
            var resetParas = document.querySelectorAll('.resultParas p');

            // limpa o conteúdo dos parágrafos
            for(var i = 0 ; i < resetParas.length ; i++) {
                resetParas[i].textContent='';
            }

            // elimina o botão adicionado em setGameOver
            resetButton.parentNode.removeChild(resetButton);
            // torna a caixa de input e o botão Verificar ativos
            cxnumero.disabled = false;
            btEnviar.disabled = false;
            cxnumero.value='';    // limpa a caixa
            cxnumero.focus();    // coloca o cursor de inserção na caixa
            msgResultado.style.backgroundColor='white';
            // Define novo número a adivinhar
            randomNumber=Math.floor(Math.random() * 100) + 1;
        }
    </script>
</body>
</html>
